import core
import blockchain
import io

program BlockchainFeesTest
begin
    IO.println("Blockchain Transaction Fees Logic Test")
    IO.println("--------------------------------------")
    
    var wallet = Blockchain.createWallet()
    
    // Logic: A transaction has a fee. Total deduction = amount + fee.
    var balance = 2000
    var amount = 1000
    var fee = 50
    
    IO.println("Checking spendable balance...")
    var totalCost = amount + fee
    
    if balance >= totalCost then
        IO.println("Transaction authorized: " + str(amount) + " with fee " + str(fee))
        balance = balance - totalCost
    else
        IO.println("Insufficient funds")
    end if
    
    IO.println("Remaining Balance: " + str(balance))
    assert(balance == 950, "Balance should be correctly updated after fee deduction")
    
    // Simulate mining reward
    IO.println("Simulating mining reward...")
    var reward = 100
    balance = balance + reward
    IO.println("Balance after reward: " + str(balance))
    assert(balance == 1050, "Miner balance should include reward")
    
    IO.println("âœ“ Fee and Reward logic simulation PASS")
end
